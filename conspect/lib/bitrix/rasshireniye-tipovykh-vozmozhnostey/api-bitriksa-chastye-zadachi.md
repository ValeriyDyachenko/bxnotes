---
layout: post.njk
tags: [post, postInConspect:rasshireniye-tipovykh-vozmozhnostey]
conspect: rasshireniye-tipovykh-vozmozhnostey
section: lib
subject: bitrix
title: API Битрикса, частые задачи
seoDescription: API Битрикса - уменьшение изображения, получения данных пользователя, установка мета тегов страницы, получение и установка параметров модуля, отправка писем, использование агентов, работа с журналом событий.
seoKeywords: битрикс, API, CFile, CUser, GetOptionString, CEvent, CAgent, CEventLog
date: 2018-01-05 01:00:00
---
# API Битрикса, частые задачи

## CFile

Уменьшение изображения:

```php
CFile::ResizeImageGet();
```

## CUser

Данные о пользователе по Id:

```php
CUser::GetById();
```

## Мета теги страниц

Установка мета-тегов: 

```php
$APPLICATION->SetPageProperty($tagName, $value);
```

## COption

+ `COption` - класс для работы с параметрами модулей, хранимых в базе данных.
+ `GetOptionString`  - возвращает строковое значение параметра.  
+ `SetOptionString` - устанавливает строковое значение параметра.

Возвращает email администратора: 

```php
COption::GetOptionString('main', 'mail_from')
```

Можно установить кастомный параметр:

```php
COption::SetOptionString('main', 'MY_PARAM', 'Y').
```

## CEvent

Отправка писем: `Настройка -> Настройки продукта -> Почтовые события`. В данном разделе находятся типы событий (определяют переменные) и почтовые шаблоны (определяют внешний вид письма). Для отправки писем есть *API* - класс `CEvent`.

## Агенты

Агенты. Класс `CAgent`. В агентах нет переменной `$USER` (т.к. агент выполняются до события `OnPageStart`) её нужно создать и разрушить.

Тяжелые агенты переносятся на крон.

Управление через админ. раздел `Настройки -> Инструменты -> Агенты`.

## CEventLog Журнал событий

Для добавления записи в журнал есть API - `CEventLog::Add()`.

Просмотреть журнал событий можно через `Настройки -> Инструменты -> Журнал событий`.

`Настройки модулей -> главный модуль`, на вкладке журнал событий можно выбрать какие события записывать в журнал и сколько дней их хранить. Так же модуль *Инфоблоки* можно настроить на журналирование.